<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Forced Aligner Tool</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta3/dist/js/bootstrap.bundle.min.js" integrity="sha384-JEW9xMcG8R+pH31jmWH6WWP0WintQrMb4s7ZOdauHnUtxwoG2vI5DkLtS3qm9Ekf" crossorigin="anonymous"></script>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-eOJMYsd53ii+scO/bJGFsiCZc+5NDVN2yr8+0RDqr0Ql0h+rP48ckxlpbzKgwra6" crossorigin="anonymous">
    <script type="text/javascript" src="http://code.jquery.com/jquery-1.4.4.js"></script>
    <script>
        const script = {{transcript | tojson}};
        $(document).ready(function() {
            $("#playbtn").click(function(){
                var audio = new Audio("http://127.0.0.1:5000/get-audio");
                audio.play();
                $("#text").text("");
                for(let i = 0; i < script[0].length; i++) {
                    setTimeout(function () {
                        $("#text").append(script[0][i]+" ");
                    }, script[1][i]*1000);
                }
            });
        });
    </script>
</head>
<body>
    <center>
        <div style="width: 50%">
            <div style="height: 5vh"></div>
            <button type="button" class="btn btn-primary mb-2" id="playbtn">Play</button>
            <div style="height: 3vh"></div>
            <div class="card">
              <div class="card-body" id="text">
                Press play. Your transcript will appear here in sync with the audio.
              </div>
            </div>
        </div>
    </center>
</body>
</html>